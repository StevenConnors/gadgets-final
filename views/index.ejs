<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>

    </script>
  </head>
  <body>
    <h1><%= title %></h1>
    <p>Welcome to <%= title %></p>
    <h3 id='piezoValA'> </h3>
    <h3 id='piezoValB'> </h3>

    <div id="piezoPlotA" style="width:600px;height:250px;"></div>
    <div id="piezoPlotB" style="width:600px;height:250px;"></div>
    


    <script src="//cdn.anychart.com/js/latest/anychart.min.js" type="text/javascript"></script> 
    <script>
            anychart.onDocumentLoad(function() {
                // create an instance of pie chart with data
                var chart = anychart.pie([
                    ["Chocolate", 5],
                    ["Rhubarb compote", 2],
                    ["CrÃªpe Suzette", 2],
                    ["American blueberry", 2],
                    ["Buttermilk", 1]
                ]);
                chart.title("Top 5 pancake fillings");
                // pass the container where chart will be drawn
                chart.container("container");
                // call the chart draw() method to initiate chart drawing
                chart.draw();
            });
    </script>


    <script type="text/javascript">

      var xGraphA = [];
      var xGraphB = [];
      var yGraphA = [];
      var yGraphB = [];
      var plotA = document.getElementById('piezoPlotA');
      var plotB = document.getElementById('piezoPlotB');
        
      var socket = io.connect();
      socket.on('sensorA', function (data) {
        // data.sensorVal is in the form X: ###
        document.getElementById("piezoValA").innerHTML = data.sensorVal;
        var num = data.sensorVal.substr(2, data.sensorVal.length - 1);

        xGraphA.push((xGraphA.length + 1));
        yGraphA.push(num);

        // Plotly.plot(plotA, [{
        //     x: xGraphA,
        //     y: yGraphA
        //     }], {
        //     margin: { t: 0 },
        //     fileopt: "overwrite"
        //   } 
        // );

      });

      socket.on('sensorB', function (data) {
        document.getElementById("piezoValB").innerHTML = data.sensorVal;
        var num = data.sensorVal.substr(2, data.sensorVal.length - 1);

        xGraphB.push((xGraphB.length + 1));
        yGraphB.push(num);

        // Plotly.plot( plotB, [{
        //     x: xGraphB,
        //     y: yGraphB
        //     }], {
        //     margin: { t: 0 } } 
        // );

      });

    </script>
  </body>
</html>
